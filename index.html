<?php

#   Yii2.0.7学习笔记

#   场景
public function scenarios()
{
    return [
        'create' => ['title', 'image', 'content'],
        'update' => ['title', 'content'],
    ];
}

#rule
[['title', 'content'], 'required', 'on' => ['create', 'update']],
[['image'], 'required', 'on' => 'create'],
[['image'], 'image', 'enableClientValidation' => true,   'maxSize' => 1024, 'message' => '您上传的文件过
大', 'on' => ['create']],

#   controller  update
$model = $this->findModel($id);
$model->setScenario('update'); or $model->scenario = 'update';


# widget小部件使用

namespace backend\components;
use backend\models\Nav;
use yii\base\Widget;
use yii\helpers\Html;

class NavWidget extends Widget
{
    public function run()
    {
        $nav = Nav::find()
        ->where(['status' => 1])
        ->orderBy('sort ASC')
        ->all();
        foreach($nav as $_v){
            $navs[] = $_v->id.'|'.$_v->nav_cn.'|'.$_v->nav_en;
        }
        // 渲染视图
         return $this->render('@app/views/site/_nav', [
             'nav'=>$navs,
         ]);
    }
}

?>